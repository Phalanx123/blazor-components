export function init(t,i,r,f,e){if(t&&i&&r){u(n,i,r,f,e);let o="https://maps.googleapis.com/maps/api/js?key=",h=!1,l=document.querySelectorAll("head > script");if(l.forEach(n=>{if(n){let t=n.getAttribute("src");if(t&&t.startsWith(o)){h=!0;return}}}),h){window.google&&window.initGoogleMaps();return}let c=document.createElement("script");c.src="https://polyfill.io/v3/polyfill.min.js?features=default";document.head.appendChild(c);o=o+t+"&callback=initGoogleMaps&libraries=&v=weekly";let s=document.createElement("script");s.src=o;s.defer=!0;document.head.appendChild(s)}}function u(n,t,i,r,u){for(let i=0;i<n.length;i++)if(n[i].key===t)return;!1||n.push({key:t,value:{ref:i,map:null,bgColor:r,ctrSize:u}})}function f(n,t){for(let i=0;i<n.length;i++)if(n[i].key===t){n.splice(i,1);break}}function t(n,t){for(let i=0;i<n.length;i++)if(n[i].key===t)return n[i].value}export function setCenterCoords(i,r,u){if(i){let f=t(n,i);f&&f.map&&f.map.setCenter({lat:r,lng:u})}}export function setCenterAddress(i,u){if(i){let f=t(n,i);f&&f.map&&r(u,function(n){n&&f.map.setCenter(n[0].geometry.location)})}}export function panToCoords(i,r,u){if(i){let f=t(n,i);f&&f.map&&f.map.panTo({lat:r,lng:u})}}export function panToAddress(i,u){if(i){let f=t(n,i);f&&f.map&&r(u,function(n){n&&f.map.panTo(n[0].geometry.location)})}}export function setZoom(i,r){if(i){let u=t(n,i);u&&u.map&&u.map.setZoom(r)}}export function setMapType(i,r){if(i){let u=t(n,i);u&&u.map&&u.map.setMapTypeId(r)}}export function setHeading(i,r){if(i){let u=t(n,i);u&&u.map&&u.map.setHeading(r)}}export function setTilt(i,r){if(i){let u=t(n,i);u&&u.map&&u.map.setTilt(r)}}export function setClickableIcons(i,r){if(i){let u=t(n,i);u&&u.map&&u.map.setClickableIcons(r)}}export function setOptions(i,r){if(i){let u=t(n,i);u&&u.map&&u.map.setOptions(r)}}export function resizeMap(i){if(i){let r=t(n,i);r&&r.map&&google.maps.event.trigger(r.map,"resize")}}export function createCustomControls(i,r){if(i&&r){let f=t(n,i);if(f&&f.map)for(var u=0;u<r.length;u++){let n=r[u],t=document.createElement("div");t.innerHTML=n.content;f.map.controls[n.controlPosition].push(t);let i=n.id,e=f.ref;t.addEventListener("click",()=>{e.invokeMethodAsync("CustomControlClicked",i)})}}}export function createMarkers(r,u){if(r&&u&&u.length){let o=t(n,r);if(o&&o.map)for(var f=0;f<u.length;f++){let n=u[f],t=new google.maps.Marker({id:n.id,crossOnDrag:n.crossOnDrag,optimized:n.optimized});if(t.setMap(o.map),e(n,t),i.push(t),n.clickable){let i=null;n.infoWindow&&(i=new google.maps.InfoWindow({content:n.infoWindow.content,maxWidth:n.infoWindow.maxWidth}));t.addListener("click",()=>{o.ref.invokeMethodAsync("MarkerClicked",n.id),i&&i.open(o.map,t)})}if(n.draggable){t.addListener("drag",()=>{i("MarkerDrag",n.id,t.getPosition().toJSON())});t.addListener("dragend",()=>{i("MarkerDragEnd",n.id,t.getPosition().toJSON())});t.addListener("dragstart",()=>{i("MarkerDragStart",n.id,t.getPosition().toJSON())});function i(n,t,i){let r={Latitude:i.lat,Longitude:i.lng};o.ref.invokeMethodAsync(n,t,r)}}}}}export function removeMarkers(r,u){if(r&&u&&u.length){let e=t(n,r);if(e&&e.map)for(var f=0;f<u.length;f++){let n=u[f];i.forEach((t,r)=>{if(n.id==t.id){t.setMap(null);i.splice(r,1);return}})}}}function e(n,t){t&&n&&(t.setPosition({lat:n.position.latitude,lng:n.position.longitude}),t.anchorPoint=n.anchorPoint?{x:n.anchorPoint.x,y:n.anchorPoint.y}:null,t.setAnimation(n.animation),t.setClickable(n.clickable),t.crossOnDrag=n.crossOnDrag,t.setCursor(n.cursor),t.setDraggable(n.draggable),t.setIcon(n.icon),t.setLabel(n.label),t.setOpacity(n.opacity),t.optimized=n.optimized,t.setShape(n.shape),t.setTitle(n.title),t.setVisible(n.visible),t.setZIndex(n.zIndex))}export function getAddressCoordinates(i,u){r(u,function(r){if(r){let u=t(n,i);u&&u.map&&u.ref.invokeMethodAsync("AddressSearch",r)}})}function r(n,t){let i=new google.maps.Geocoder;i.geocode({address:n},function(n,i){i==google.maps.GeocoderStatus.OK&&t(n)})}export function dispose(i){if(i){let r=t(n,i);r.map=null;r.ref=null;f(n,i)}}window.initGoogleMaps=()=>{for(let i=0;i<n.length;i++){let f=n[i].key,e=n[i].value;if(!n[i].value.map){let r=new google.maps.Map(document.getElementById(f),{backgroundColor:e.bgColor,controlSize:e.ctrSize});r.elementId=f;n[i].value.map=r;function u(i,u){if(r&&r.elementId&&i){let f=t(n,r.elementId);if(f){let n=i.latLng.toJSON(),t={Latitude:n.lat,Longitude:n.lng};f.ref.invokeMethodAsync(u,t)}}}r.addListener("click",n=>{u(n,"MapClicked")});r.addListener("dblclick",n=>{u(n,"MapDoubleClicked")});r.addListener("contextmenu",n=>{u(n,"MapContextMenu")});r.addListener("mouseup",n=>{u(n,"MapMouseUp")});r.addListener("mousedown",n=>{u(n,"MapMouseDown")});r.addListener("mousemove",n=>{u(n,"MapMouseMove")});r.addListener("mouseover",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapMouseOver")}});r.addListener("mouseout",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapMouseOut")}});r.addListener("center_changed",()=>{if(r&&r.elementId){let i=t(n,r.elementId);if(i&&r.getCenter()){let n=r.getCenter().toJSON(),t={Latitude:n.lat,Longitude:n.lng};i.ref.invokeMethodAsync("MapCenterChanged",t)}}});r.addListener("zoom_changed",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapZoomChanged",r.getZoom())}});r.addListener("maptypeid_changed",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapTypeIdChanged",r.getMapTypeId())}});r.addListener("heading_changed",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapHeadingChanged",r.getHeading())}});r.addListener("tilt_changed",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapTiltChanged",r.getTilt())}});r.addListener("bounds_changed",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapBoundsChanged")}});r.addListener("projection_changed",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapProjectionChanged")}});r.addListener("draggable_changed",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapDraggableChanged")}});r.addListener("streetview_changed",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapStreetviewChanged")}});r.addListener("drag",()=>{if(r&&r.elementId){let i=t(n,r.elementId);if(i&&r.getCenter()){let n=r.getCenter().toJSON(),t={Latitude:n.lat,Longitude:n.lng};i.ref.invokeMethodAsync("MapDrag",t)}}});r.addListener("dragend",()=>{if(r&&r.elementId){let i=t(n,r.elementId);if(i&&r.getCenter()){let n=r.getCenter().toJSON(),t={Latitude:n.lat,Longitude:n.lng};i.ref.invokeMethodAsync("MapDragEnd",t)}}});r.addListener("dragstart",()=>{if(r&&r.elementId){let i=t(n,r.elementId);if(i&&r.getCenter()){let n=r.getCenter().toJSON(),t={Latitude:n.lat,Longitude:n.lng};i.ref.invokeMethodAsync("MapDragStart",t)}}});r.addListener("resize",()=>{if(r&&r.elementId){let i=t(n,r.elementId);if(i){let n={Width:r.getDiv().offsetWidth,Height:r.getDiv().offsetHeight};i.ref.invokeMethodAsync("MapResized",n)}}});r.addListener("tilesloaded",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapTilesLoaded")}});r.addListener("idle",()=>{if(r&&r.elementId){let i=t(n,r.elementId);i&&i.ref.invokeMethodAsync("MapIdle")}});n[i].value.ref.invokeMethodAsync("MapInitialized",f)}}};let n=[],i=[];